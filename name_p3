#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main() {
    // Read Matrices A and B from files
    ifstream fileA("nbennings_mat1.txt");
    ifstream fileB("nbennings_mat2.txt");

    if (!fileA || !fileB) {
        cerr << "Error opening input files." << endl;
        return 1;
    }

    int rowsA, columnsA, rowsB, columnsB;
    fileA >> rowsA >> columnsA;
    fileB >> rowsB >> columnsB;

    if (columnsA != rowsB) {
        cerr << "Matrix dimensions are incompatible for multiplication." << endl;
        return 1;
    }

    int matA[100][100];
    int matB[100][100];

    for (int i = 0; i < rowsA; i++) {
        for (int j = 0; j < columnsA; j++) {
            fileA >> matA[i][j];
        }
    }

    for (int i = 0; i < rowsB; i++) {
        for (int j = 0; j < columnsB; j++) {
            fileB >> matB[i][j];
        }
    }

    fileA.close();
    fileB.close();

    // Multiply Matrices A and B to get MatC
    int matC[100][100];

    for (int i = 0; i < rowsA; i++) {
        for (int j = 0; j < columnsB; j++) {
            matC[i][j] = 0;
            for (int k = 0; k < columnsA; k++) {
                matC[i][j] += matA[i][k] * matB[k][j];
            }
        }
    }

    // Write MatC to a file
    ofstream outfile("nbennings_p3_out12.txt");
    outfile << rowsA << " " << columnsB << endl;

    for (int i = 0; i < rowsA; i++) {
        for (int j = 0; j < columnsB; j++) {
            outfile << matC[i][j] << " ";
        }
        outfile << endl;
    }

    outfile.close();

    return 0;
}
